<div id="search">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path
      d="M3.624,15a8.03,8.03,0,0,0,10.619.659l5.318,5.318a1,1,0,0,0,1.414-1.414l-5.318-5.318A8.04,8.04,0,0,0,3.624,3.624,8.042,8.042,0,0,0,3.624,15Zm1.414-9.96a6.043,6.043,0,1,1-1.77,4.274A6,6,0,0,1,5.038,5.038ZM4.622,9.311a1,1,0,0,1,2,0A2.692,2.692,0,0,0,9.311,12a1,1,0,0,1,0,2A4.7,4.7,0,0,1,4.622,9.311Z"
    >
    </path>
  </svg>
  <input type="text" placeholder="Search" />
</div>

<script>
  import $ from "jquery";

  $(() => {
    const $input = $("#search input");

    $input.on("keyup", (event) => {
      switch (event.keyCode) {
        case 27: // ESC
          window.$events.trigger("seach:clear");
          $input.val("");
          break;

        case 38: // UP
          break;

        case 40: // DOWN
          break;

        case 13: // ENTER
          window.$events.trigger("search:submit", { value: $input.val() });
          break;
      }
    });

    window.$events.on("search:focus", () => {
      console.log("focus");
      $input.focus();
    });
  });
</script>

<style>
  #search {
    position: relative;
    background: #e8e8e8;
    padding: 4px;
    border-right: 1px solid #aaa;
    border-bottom: 1px solid #aaa;
    box-shadow: 0 2px 2px rgba(0, 0, 0, 0.1);
  }

  svg {
    width: 15px;
    height: 15px;
    position: absolute;
    top: 11px;
    left: 9px;
  }

  svg path {
    fill: #888;
  }

  input {
    width: 100%;
    font-size: 0.9em;
    border-radius: 0;
    padding: 4px 4px 4px 22px;
    background: white;
    border: 0;
    border-radius: 2px;
  }

  input:focus {
    outline: 1px solid #888;
  }
</style>
