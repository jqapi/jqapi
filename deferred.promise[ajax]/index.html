<!DOCTYPE html>
<link rel="stylesheet" href="/assets/_entryName_.6792fa87.css" /><script type="module" src="/hoisted.e7f359dc.js"></script><div id="content">
      <div id="entry">
  <ul id="entry-nav"></ul>

  <div id="entry-content">
    <section class="section">
      <h1 class="title is-2">deferred.promise()</h1>
      <h2 class="subtitle is-5"> Return a Deferred&#39;s Promise object. </h2>

      <div id="signatures">
  <h4 class="title is-4">
          .deferred.promise(target)<span class="return">&#129122; Promise</span>
        </h4><table class="table is-striped is-bordered is-fullwidth">
          <tbody>
            <tr>
                <td>
                  <code>
                    target
                  </code>
                </td>
                <td>Object</td>
                <td>
                  Object onto which the promise methods have to be attached
                </td>
              </tr>
          </tbody>
        </table>
</div>
      <div class="content">
  
    <p>The <code>deferred.promise()</code> method allows an asynchronous function to prevent other code from interfering with the progress or status of its internal request. The Promise exposes only the Deferred methods needed to attach additional handlers or determine the state (<code>then</code>, <code>done</code>, <code>fail</code>, <code>always</code>, <code>pipe</code>, <code>progress</code>, <code>state</code> and <code>promise</code>), but not ones that change the state (<code>resolve</code>, <code>reject</code>, <code>notify</code>, <code>resolveWith</code>, <code>rejectWith</code>, and <code>notifyWith</code>).</p>
    <p>If <code>target</code> is provided, <code>deferred.promise()</code> will attach the methods onto it and then return this object rather than create a new one. This can be useful to attach the Promise behavior to an object that already exists.</p>
    <p>If you are creating a Deferred, keep a reference to the Deferred so that it can be resolved or rejected at some point. Return <em>only</em> the Promise object via <code>deferred.promise()</code> so other code can register callbacks or inspect the current state.</p>
    <p>For more information, see the documentation for <a href="/category/deferred-object/">Deferred object</a>.</p>
  
</div>
      <!-- prettier-ignore --><div id="examples">
  <div class="columns is-multiline is-gapless example">
        <div class="column is-6">
          <pre class="language-html"><code></code></pre>
        </div>

        <div class="column is-6">
          <pre class="language-css"><code></code></pre>
        </div>

        <div class="column is-6">
          <pre class="language-javascript"><code><span class="token keyword">function</span> <span class="token function">asyncEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> dfd <span class="token operator">=</span> jQuery<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Resolve after a random interval</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dfd<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"hurray"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">400</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Reject after a random interval</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    dfd<span class="token punctuation">.</span><span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">"sorry"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span><span class="token number">400</span> <span class="token operator">+</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">2000</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Show a "working..." message every half-second</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token function">working</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>dfd<span class="token punctuation">.</span><span class="token function">state</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">===</span> <span class="token string">"pending"</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      dfd<span class="token punctuation">.</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token string">"working... "</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span>working<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Return the Promise so caller can't change the Deferred</span>
  <span class="token keyword">return</span> dfd<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// Attach a done, fail, and progress handler for the asyncEvent</span>
$<span class="token punctuation">.</span><span class="token function">when</span><span class="token punctuation">(</span><span class="token function">asyncEvent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>status <span class="token operator">+</span> <span class="token string">", things are going well"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">alert</span><span class="token punctuation">(</span>status <span class="token operator">+</span> <span class="token string">", you fail this time"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">status</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">"body"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span>status<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
        </div>

        <div class="column is-6 demo">
          <iframe src="javascript:document.write(`<!DOCTYPE html><html><head><style></style></head><body><script src=&#34;/jquery-3.6.3.min.js&#34;></script><script>function asyncEvent() {var dfd = jQuery.Deferred();// Resolve after a random intervalsetTimeout(function() {dfd.resolve( &#34;hurray&#34; );}, Math.floor( 400 + Math.random() * 2000 ) );// Reject after a random intervalsetTimeout(function() {dfd.reject( &#34;sorry&#34; );}, Math.floor( 400 + Math.random() * 2000 ) );// Show a &#34;working...&#34; message every half-secondsetTimeout(function working() {if ( dfd.state() === &#34;pending&#34; ) {dfd.notify( &#34;working... &#34; );setTimeout( working, 500 );}}, 1 );// Return the Promise so caller can't change the Deferredreturn dfd.promise();}// Attach a done, fail, and progress handler for the asyncEvent$.when( asyncEvent() ).then(function( status ) {alert( status + &#34;, things are going well&#34; );},function( status ) {alert( status + &#34;, you fail this time&#34; );},function( status ) {$( &#34;body&#34; ).append( status );});</script></body></html>`);document.close();" width="100%" height="100%"></iframe>
        </div>
      </div><div class="columns is-multiline is-gapless example">
        <div class="column is-6">
          <pre class="language-html"><code></code></pre>
        </div>

        <div class="column is-6">
          <pre class="language-css"><code></code></pre>
        </div>

        <div class="column is-6">
          <pre class="language-javascript"><code><span class="token comment">// Existing object</span>
<span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">hello</span><span class="token operator">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">alert</span><span class="token punctuation">(</span><span class="token string">"Hello "</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token comment">// Create a Deferred</span>
  defer <span class="token operator">=</span> $<span class="token punctuation">.</span><span class="token function">Deferred</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Set object as a promise</span>
defer<span class="token punctuation">.</span><span class="token function">promise</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Resolve the deferred</span>
defer<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"John"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// Use the object as a Promise</span>
obj
  <span class="token punctuation">.</span><span class="token function">done</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    obj<span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Will alert "Hello John"</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">hello</span><span class="token punctuation">(</span><span class="token string">"Karl"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Will alert "Hello Karl"</span>
</code></pre>
        </div>

        <div class="column is-6 demo">
          <iframe src="javascript:document.write(`<!DOCTYPE html><html><head><style></style></head><body><script src=&#34;/jquery-3.6.3.min.js&#34;></script><script>// Existing objectvar obj = {hello: function( name ) {alert( &#34;Hello &#34; + name );}},// Create a Deferreddefer = $.Deferred();// Set object as a promisedefer.promise( obj );// Resolve the deferreddefer.resolve( &#34;John&#34; );// Use the object as a Promiseobj.done(function( name ) {obj.hello( name ); // Will alert &#34;Hello John&#34;}).hello( &#34;Karl&#34; ); // Will alert &#34;Hello Karl&#34;</script></body></html>`);document.close();" width="100%" height="100%"></iframe>
        </div>
      </div>
</div>
    </section>
  </div>
</div>


    </div>